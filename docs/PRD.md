# FoodiePass: Product Requirements Document (PRD)

> **문서 목적**: 이 PRD는 '개발 명세서'가 아닌 '**가설 검증 계획서**'입니다. 모든 기능과 요구사항은 핵심 가설을 검증하기 위해 존재합니다.

---

## 1. 문서 개요

| 항목 | 내용 |
|---|---|
| **프로젝트명** | FoodiePass MVP |
| **버전** | v2.0 (MVP - Hypothesis Validation) |
| **작성일** | 2025-11-02 |
| **목표** | 핵심 가설 검증을 통한 제품-시장 적합성(PMF) 확인 |
| **개발 기간** | 10일 |

---

## 2. 프로젝트 배경

### 문제 정의
여행객이 해외 식당에서 외국어 메뉴판을 마주했을 때, **정보 비대칭**으로 인해 주문이 '추측 게임'이 되어 **'주문 실패의 불안'**을 겪습니다.

### 기존 솔루션의 한계
- **Google Translate**: 텍스트만 번역, 음식의 시각적 정보 없음
- **음식 앱들**: 특정 식당 데이터만 제공, 범용성 부족

### 우리의 접근
메뉴판 사진 → **[OCR + 번역 + 사진/설명 + 환율]** → 시각적 메뉴 제공

---

## 3. 핵심 검증 질문 (Core Questions)

우리는 다음 3가지 핵심 질문에 답하기 위해 이 MVP를 만듭니다:

### Q1. 가치 (Value)
> "사용자는 [텍스트 번역만]으로는 여전히 불안하지만, [사진/설명/환율]이 추가되면 정말로 '주문 확신'을 갖게 되는가?"

**검증 방법**: A/B 테스트 (Control vs Treatment)

### Q2. 기술 (Feasibility)
> "우리는 OCR, 번역, 음식 매칭, 환율 변환을 통합하여, 70% 이상 연관성의 사진/설명과 95% 이상 정확도의 환율을 제공할 수 있는가?"

**검증 방법**: 내부 기술 테스트 (100개 메뉴판)

### Q3. 행동 (Behavior)
> "[시각적 메뉴]를 사용한 집단의 '확신도'가 [텍스트 번역만] 집단 대비 2배 이상 높은가?"

**검증 방법**: 사용자 설문 (Yes/No 응답률 비교)

---

## 4. 검증 가설 (Hypotheses)

### H1: 핵심 가치 가설
**가설**: "여행객은 [텍스트 번역만] 제공된 메뉴로는 여전히 '주문 불안'을 느끼지만, 사진/설명/환율이 포함된 시각적 메뉴가 제공될 경우, '주문에 대한 확신'을 갖게 된다."

**성공 기준**:
- Treatment 그룹의 'Yes' 응답률 ≥ 70%
- Treatment 그룹의 'Yes' 응답률이 Control 그룹 대비 ≥ 2배

### H2: 기술 실현 가설
**가설**: "우리는 OCR, 환율 API, 음식 매칭 시스템을 통해, 70% 이상의 연관성으로 [사진/설명]과 95% 이상의 정확도로 [환율] 정보를 제공할 수 있다."

**성공 기준**:
- OCR 메뉴명/가격 추출 정확도 ≥ 90%
- 음식 사진 매칭 연관성 ≥ 70% (수동 검증)
- 환율 변환 정확도 ≥ 95%
- 전체 파이프라인 처리 시간 ≤ 5초

### H3: 사용자 행동/인지 가설
**가설**: "[시각적 메뉴]를 사용한 집단은, [텍스트 번역만] 사용한 집단 대비, '확신을 갖고 주문할 수 있다'고 응답하는 비율이 2배 이상 높을 것이다."

**성공 기준**:
- Treatment 그룹 vs Control 그룹 'Yes' 응답률 비율 ≥ 2.0

---

## 5. 목표 (Goals)

| 목표 | 수치 | 관련 가설 | 측정 방법 |
|---|---|---|---|
| **기술 정확도** | OCR 90%+ | H2 | 내부 테스트 |
| **매칭 연관성** | 70%+ | H2 | 수동 검증 |
| **환율 정확도** | 95%+ | H2 | API 비교 |
| **처리 속도** | 5초 이내 | H2 | 성능 테스트 |
| **확신도 (Treatment)** | 70%+ Yes | H1, H3 | 사용자 설문 |
| **확신도 상승** | 2배 이상 | H1, H3 | A/B 비교 |

---

## 6. 핵심 기능 (Features)

> **중요**: 모든 기능은 특정 가설을 검증하기 위해 존재합니다.

### 6.1 기능 목록

| ID | 기능명 | 설명 | 검증 대상 | 우선순위 |
|---|---|---|---|---|
| **F-01** | 웹 업로더 | 메뉴판 사진 업로드 + 언어/화폐 선택 | 전제 조건 | P0 |
| **F-02** | OCR 파이프라인 | 메뉴판 → 메뉴명/가격 추출 | H2 (기술) | P0 |
| **F-03** | 번역 파이프라인 | 메뉴명 → 사용자 언어 번역 | H2 (기술) | P0 |
| **F-04** | 음식 매칭 파이프라인 | 메뉴명 → 사진/설명 매칭 | H2 (기술) | P0 |
| **F-05** | 환율 변환 | 현지 가격 → 사용자 화폐 변환 | H2 (기술) | P0 |
| **F-06** | 시각적 메뉴 UI (Treatment) | 사진 + 설명 + 번역 + 환율 표시 | H1, H3 (가치/행동) | P0 |
| **F-07** | 텍스트 전용 UI (Control) | 번역 + 환율만 표시 | H1, H3 (대조군) | P0 |
| **F-08** | A/B 그룹 배정 | 사용자를 Control/Treatment 그룹 랜덤 배정 | H3 (측정) | P0 |
| **F-09** | 확신도 설문 | "확신을 갖고 주문할 수 있습니까?" Yes/No | H1, H3 (측정) | P0 |

### 6.2 기능 상세 명세

#### F-01: 웹 업로더
**목적**: 사용자가 메뉴판 사진을 업로드하고 언어/화폐를 선택할 수 있도록 함

**User Story**:
- As a 여행객, I want to 메뉴판 사진을 업로드하고 내 언어/화폐를 선택, So that 맞춤형 메뉴를 받을 수 있다

**Acceptance Criteria**:
- [ ] 이미지 파일 업로드 (JPG, PNG, HEIC)
- [ ] 언어 선택 드롭다운 (한국어, 영어, 일본어 등)
- [ ] 화폐 선택 드롭다운 (KRW, USD, JPY 등)
- [ ] 업로드 후 로딩 상태 표시

---

#### F-02: OCR 파이프라인
**목적**: 메뉴판 이미지에서 메뉴명과 가격을 추출

**검증 질문**: "우리는 90% 이상 정확도로 메뉴명과 가격을 추출할 수 있는가?" (H2)

**Acceptance Criteria**:
- [ ] Google Vertex AI OCR API 연동
- [ ] 메뉴명과 가격 파싱 (정규식 + AI)
- [ ] 내부 테스트 100개 이미지 정확도 ≥ 90%

**기술 스택**: Google Cloud Vertex AI

---

#### F-03: 번역 파이프라인
**목적**: 추출된 메뉴명을 사용자 언어로 번역

**검증 질문**: "번역 품질이 사용자가 이해할 수 있는 수준인가?" (H2)

**Acceptance Criteria**:
- [ ] Google Translation API 연동
- [ ] 소스 언어 자동 감지
- [ ] 타겟 언어로 번역

**기술 스택**: Google Cloud Translation API

---

#### F-04: 음식 매칭 파이프라인
**목적**: 번역된 메뉴명으로 음식 사진과 설명 검색

**검증 질문**: "우리는 70% 이상 연관성으로 음식 사진/설명을 매칭할 수 있는가?" (H2)

**Acceptance Criteria**:
- [ ] TasteAtlas API 또는 Google Search API 연동
- [ ] 음식 이름 → 사진 URL + 설명 반환
- [ ] 내부 검증: 수동으로 70% 이상 적합성 확인

**기술 스택**: TasteAtlas API (기존 코드), Google Search API (fallback)

---

#### F-05: 환율 변환
**목적**: 현지 화폐 가격을 사용자 화폐로 변환

**검증 질문**: "우리는 95% 이상 정확도로 환율을 제공할 수 있는가?" (H2)

**Acceptance Criteria**:
- [ ] 환율 API 연동 (실시간 또는 일일 업데이트)
- [ ] 가격 변환 로직
- [ ] 정확도 검증: 공식 환율과 비교 ≥ 95%

**기술 스택**: Currency API (기존 코드)

---

#### F-06: 시각적 메뉴 UI (Treatment Group)
**목적**: 사용자에게 사진/설명/번역/환율을 모두 제공

**검증 질문**: "이 정보가 사용자의 '주문 확신'을 높이는가?" (H1, H3)

**UI 구성**:
```
[메뉴 아이템 카드]
┌─────────────────────────┐
│  [음식 사진]             │
│  메뉴명 (현지어)          │
│  번역명 (사용자 언어)      │
│  설명 (간략)             │
│  가격: $10 (12,000원)   │
└─────────────────────────┘
```

**Acceptance Criteria**:
- [ ] 음식 사진 표시 (없으면 placeholder)
- [ ] 메뉴명 (원어 + 번역)
- [ ] 음식 설명 (간략, 2-3줄)
- [ ] 가격 (현지 화폐 + 사용자 화폐)
- [ ] 반응형 디자인 (모바일 우선)

---

#### F-07: 텍스트 전용 UI (Control Group)
**목적**: 대조군으로 번역과 환율만 제공

**검증 질문**: "텍스트만으로는 사용자가 여전히 불안한가?" (H1, H3)

**UI 구성**:
```
[메뉴 아이템 리스트]
- 메뉴명 (현지어)
  번역명 (사용자 언어)
  가격: $10 (12,000원)
```

**Acceptance Criteria**:
- [ ] 사진/설명 없음
- [ ] 메뉴명 (원어 + 번역)
- [ ] 가격 (현지 화폐 + 사용자 화폐)

---

#### F-08: A/B 그룹 배정
**목적**: 사용자를 Control/Treatment 그룹에 랜덤 배정

**검증 질문**: "A/B 테스트가 공정하게 진행되는가?" (H3)

**Acceptance Criteria**:
- [ ] 사용자 세션 생성 시 랜덤 배정 (50:50)
- [ ] 그룹 정보 저장 (세션 또는 쿠키)
- [ ] 그룹에 따라 다른 UI 제공 (F-06 vs F-07)

**기술 스택**: 세션 관리 (Spring Session + Redis 또는 간단히 쿠키)

---

#### F-09: 확신도 설문
**목적**: 사용자의 '주문 확신도'를 측정

**검증 질문**: "Treatment 그룹의 확신도가 Control 그룹보다 2배 이상 높은가?" (H1, H3)

**설문 질문**:
> "이 정보만으로, 실패에 대한 걱정 없이 확신을 갖고 메뉴를 주문할 수 있습니까?"
> - [ ] Yes (확신 있음)
> - [ ] No (여전히 불안함)

**Acceptance Criteria**:
- [ ] 메뉴 표시 후 설문 팝업 또는 하단 버튼
- [ ] Yes/No 응답 수집
- [ ] 그룹별 응답 데이터 저장 (분석용)

---

## 7. 사용자 플로우 (User Flow)

### 7.1 전체 플로우

```
[시작]
  ↓
[메뉴판 사진 업로드] (F-01)
  ↓
[언어/화폐 선택] (F-01)
  ↓
[A/B 그룹 배정] (F-08)
  ↓
[파이프라인 실행] (F-02 → F-03 → F-04 → F-05)
  ↓
[메뉴 UI 표시]
  ├─ Control 그룹 → [텍스트 전용 UI] (F-07)
  └─ Treatment 그룹 → [시각적 메뉴 UI] (F-06)
  ↓
[확신도 설문] (F-09)
  ↓
[응답 저장 및 종료]
```

### 7.2 Control 그룹 플로우
1. 메뉴판 업로드
2. 언어/화폐 선택
3. **텍스트 + 환율만 표시**
4. 확신도 설문: "이 정보로 확신을 갖고 주문할 수 있습니까?"
5. Yes/No 응답

### 7.3 Treatment 그룹 플로우
1. 메뉴판 업로드
2. 언어/화폐 선택
3. **사진 + 설명 + 텍스트 + 환율 표시**
4. 확신도 설문: "이 정보로 확신을 갖고 주문할 수 있습니까?"
5. Yes/No 응답

---

## 8. 데이터 모델 (Data Model)

### 8.1 엔티티

#### MenuScan (메뉴 스캔 세션)
```java
{
  id: UUID,
  userId: String (세션 ID),
  abGroup: "control" | "treatment",
  imageUrl: String,
  sourceLanguage: String,
  targetLanguage: String,
  sourceCurrency: String,
  targetCurrency: String,
  createdAt: Timestamp
}
```

#### MenuItem (메뉴 아이템)
```java
{
  id: UUID,
  scanId: UUID (FK),
  originalName: String,
  translatedName: String,
  originalPrice: Decimal,
  convertedPrice: Decimal,
  foodImageUrl: String (nullable),
  foodDescription: String (nullable),
  matchConfidence: Float (0-1)
}
```

#### SurveyResponse (설문 응답)
```java
{
  id: UUID,
  scanId: UUID (FK),
  abGroup: "control" | "treatment",
  hasConfidence: Boolean (Yes=true, No=false),
  createdAt: Timestamp
}
```

---

## 9. API 엔드포인트 (API Endpoints)

### 9.1 메뉴 스캔 API

#### POST /api/menus/scan
**목적**: 메뉴판 이미지 업로드 및 처리

**Request**:
```json
{
  "image": "base64 encoded image",
  "sourceLanguage": "auto",
  "targetLanguage": "ko",
  "sourceCurrency": "USD",
  "targetCurrency": "KRW"
}
```

**Response**:
```json
{
  "scanId": "uuid",
  "abGroup": "treatment",
  "items": [
    {
      "id": "uuid",
      "originalName": "Margherita Pizza",
      "translatedName": "마르게리타 피자",
      "originalPrice": 15.00,
      "convertedPrice": 20000,
      "foodImageUrl": "https://...",
      "foodDescription": "토마토 소스, 모짜렐라 치즈, 바질",
      "matchConfidence": 0.85
    }
  ],
  "processingTime": 4.2
}
```

**처리 과정**:
1. A/B 그룹 랜덤 배정
2. OCR 실행 (F-02)
3. 번역 실행 (F-03)
4. 음식 매칭 실행 (F-04) - Treatment 그룹만
5. 환율 변환 (F-05)
6. 결과 반환

---

#### POST /api/surveys
**목적**: 확신도 설문 응답 수집

**Request**:
```json
{
  "scanId": "uuid",
  "hasConfidence": true
}
```

**Response**:
```json
{
  "success": true,
  "message": "Response recorded"
}
```

---

## 10. 비기능 요구사항 (Non-Functional Requirements)

| NFR | 요구사항 | 관련 가설 | 측정 방법 |
|---|---|---|---|
| **성능** | 파이프라인 처리 시간 ≤ 5초 | H2 | 성능 테스트 |
| **정확도** | OCR 추출 정확도 ≥ 90% | H2 | 내부 테스트 |
| **매칭 품질** | 음식 사진 연관성 ≥ 70% | H2 | 수동 검증 |
| **환율 정확도** | 공식 환율 대비 ≥ 95% | H2 | API 비교 |
| **가용성** | 테스트 기간 중 99% 업타임 | 전제 | 모니터링 |
| **보안** | 업로드 이미지 개인정보 비포함 | 전제 | 가이드라인 |

---

## 11. 검증 계획 (Validation Plan)

### 11.1 기술 검증 (H2)

**목적**: "우리가 기술적으로 70% 이상 연관성과 95% 이상 정확도를 달성할 수 있는가?"

**방법**:
1. **데이터 준비**: 라벨링된 메뉴판 이미지 100개 수집
2. **정확도 측정**:
   - OCR: 추출된 메뉴명/가격 vs 실제 값 비교 → 정확도 계산
   - 환율: API 환율 vs 공식 환율 비교 → 오차율 계산
   - 매칭: 반환된 음식 사진/설명의 적합성을 수동 평가 (5점 척도)
3. **성능 측정**: 파이프라인 처리 시간 측정

**성공 기준**:
- OCR 정확도 ≥ 90%
- 환율 정확도 ≥ 95%
- 음식 매칭 연관성 ≥ 70% (3.5점 이상)
- 처리 시간 ≤ 5초

---

### 11.2 사용자 검증 (H1, H3)

**목적**: "사용자가 시각적 메뉴로 정말 '주문 확신'을 갖게 되는가?"

**방법**:
1. **참가자 모집**: 여행 경험이 있는 20명 (10명씩 A/B 그룹)
2. **테스트 진행**:
   - 각 참가자에게 동일한 외국어 메뉴판 제공
   - Control 그룹: 텍스트 + 환율만 표시
   - Treatment 그룹: 사진 + 설명 + 텍스트 + 환율 표시
3. **설문 조사**: "이 정보만으로, 실패에 대한 걱정 없이 확신을 갖고 메뉴를 주문할 수 있습니까?" (Yes/No)
4. **데이터 수집**: Yes 응답률 비교

**성공 기준**:
- Treatment 그룹 Yes 응답률 ≥ 70%
- Treatment 그룹 Yes 응답률 / Control 그룹 Yes 응답률 ≥ 2.0

---

### 11.3 검증 타임라인

```
Day 1-4: 개발 (Phase 3)
Day 5: 내부 기술 검증 (H2)
  ├─ 성공 → Day 6으로 진행
  └─ 실패 → R&D 피봇 (사용자 테스트 중단)
Day 6-7: 사용자 A/B 테스트 (H1, H3)
Day 8: 데이터 분석 및 결과 정리
```

---

## 12. 제외 범위 (Out of Scope)

> **제외 기준**: 핵심 가설 (H1, H2, H3)을 검증하는 데 **직접적인 영향이 없는** 기능

| 기능 | 제외 이유 |
|---|---|
| **장바구니** | H3는 '확신도' 측정이지 '실제 구매 행동' 측정 아님 |
| **현지 언어 주문서** | H1 검증에는 '정보 제공'만으로 충분 |
| **로그인/회원 시스템** | 가설 검증에 불필요, 익명 세션으로 충분 |
| **결제 시스템** | MVP는 주문 확신도 검증, 결제는 무관 |
| **식당 리뷰/평점** | 가설과 무관한 부가 기능 |
| **메뉴 저장/히스토리** | 가설 검증에 불필요 |
| **소셜 공유** | 가설 검증에 불필요 |

---

## 13. 핵심 위험 및 완화 전략

### 13.1 기술 위험

**위험**: OCR/매칭 정확도가 목표(90%, 70%)를 달성하지 못할 위험

**완화**:
- **단계적 검증**: Day 5에 내부 테스트 먼저 진행
- **피봇 계획**: 실패 시 사용자 테스트 중단, 기술 R&D로 전환
- **Fallback**: 음식 매칭 실패 시 placeholder 이미지 사용 (단, 연관성은 낮아짐)

---

### 13.2 측정 위험

**위험**: '확신도' 설문 응답이 실제 행동을 반영하지 못할 위험

**완화**:
- **상대 비교**: Control 그룹과의 '상대적 차이'로 가치 검증
- **후속 검증**: MVP 성공 시 다음 단계에서 '실제 주문 행동' 추적

---

### 13.3 샘플 크기 위험

**위험**: 20명 샘플이 통계적으로 유의미하지 않을 위험

**완화**:
- **정성적 피드백**: 수치 외에 사용자 인터뷰로 보완
- **후속 확장**: MVP 성공 시 더 큰 규모 테스트 진행

---

## 14. 성공 기준 (Success Criteria)

### 14.1 MVP 성공 조건

다음 조건을 **모두** 만족해야 MVP 성공:

1. **[H2] 기술 검증 통과**:
   - OCR 정확도 ≥ 90%
   - 환율 정확도 ≥ 95%
   - 음식 매칭 연관성 ≥ 70%
   - 처리 시간 ≤ 5초

2. **[H1, H3] 사용자 검증 통과**:
   - Treatment 그룹 Yes 응답률 ≥ 70%
   - Treatment / Control Yes 응답률 비율 ≥ 2.0

### 14.2 다음 단계 (Post-MVP)

**MVP 성공 시**:
- Phase 2: 실제 주문 행동 추적 (장바구니, 주문서 추가)
- 샘플 크기 확대 (100명 이상)
- 다양한 요리 카테고리 테스트

**MVP 실패 시**:
- 기술 실패 (H2): 매칭 알고리즘 개선, 다른 API 탐색
- 가치 실패 (H1, H3): 사용자 인터뷰로 원인 파악, 가설 재정립

---

## 15. 개발 일정 (Development Timeline)

| Phase | 기간 | 내용 | 산출물 |
|---|---|---|---|
| **Phase 1** | Day 1-2 | AI 분석 및 전략 수립 | 1-Pager, PRD, Tech Spec |
| **Phase 2** | Day 3-5 | 상세 설계 (Blueprint) | API 설계, DB 스키마, UI 목업 |
| **Phase 3** | Day 6-9 | 구현 및 단위 검증 | 기능 구현, 단위 테스트 |
| **Phase 4** | Day 10 | E2E 테스트 및 배포 | 통합 테스트, 배포 |

---

## 16. 기술 스택

### Backend
- **언어/프레임워크**: Java 21, Spring Boot 3.5.3
- **데이터베이스**: MySQL (또는 H2 dev)
- **캐시**: Redis (세션 관리, 환율 캐싱)
- **API 통합**:
  - Google Cloud Vertex AI (OCR)
  - Google Cloud Translation (번역)
  - TasteAtlas API (음식 매칭)
  - Currency API (환율)

### Frontend
- **프레임워크**: React 또는 Next.js (TBD)
- **언어**: TypeScript
- **스타일링**: Tailwind CSS (TBD)
- **호스팅**: AWS S3 + CloudFront 또는 Vercel

### 인프라
- **클라우드**: AWS
- **컴퓨팅**: EC2 또는 ECS
- **스토리지**: S3 (이미지 저장)
- **데이터베이스**: RDS (MySQL)
- **모니터링**: CloudWatch

---

## 17. 부록 (Appendix)

### A. 용어 정의

- **MVP (Minimum Viable Product)**: 핵심 가설을 검증하기 위한 최소 기능 제품
- **A/B 테스트**: Control 그룹과 Treatment 그룹을 비교하여 효과를 측정하는 실험 방법
- **확신도 (Confidence)**: 사용자가 제공된 정보만으로 주문 결정을 내릴 수 있는 정도

### B. 참고 문서

- [1-Pager](./1-PAGER.md) - 프로젝트 개요
- [Tech Spec](./TECH_SPEC.md) - 기술 아키텍처 상세
- [API Contract](./API_CONTRACT.md) - Frontend-Backend API 명세

---

## 변경 이력 (Change Log)

| 버전 | 날짜 | 변경 내용 |
|---|---|---|
| v2.0 | 2025-11-02 | 가설 검증 중심 PRD 초안 작성 |
