# Phase 3-4: Manual Integration Test Checklist

> **사용 방법**: 브라우저에서 http://localhost:3000에 접속하여 아래 체크리스트를 수동으로 실행하세요.

---

## 사전 준비

### 서버 실행 확인
- [ ] Backend 서버 실행 중 (http://localhost:8080)
  ```bash
  curl http://localhost:8080/api/language | jq .status
  # Expected: 200
  ```
- [ ] Frontend 서버 실행 중 (http://localhost:3000)
  ```bash
  curl -s http://localhost:3000 | head -1
  # Expected: <!doctype html>
  ```

### 테스트 이미지 준비
- [ ] 실제 메뉴판 사진 3-5개 준비 (JPG/PNG)
  - 일본어 메뉴 (예: 라멘, 스시 가게)
  - 한국어 메뉴 (예: 카페, 한식당)
  - 영어 메뉴 (예: 미국 레스토랑)
- [ ] 이미지 크기 < 10MB 확인
- [ ] 텍스트가 명확한 이미지 선택

---

## Test 1: Control Group Flow (텍스트 전용)

### 1.1 홈페이지 접속
- [ ] 브라우저에서 http://localhost:3000 열기
- [ ] "FoodiePass" 제목 표시 확인
- [ ] "메뉴판을 찍으면 자동으로 번역하고 사진까지 보여드립니다" 설명 확인
- [ ] 파일 업로드 영역 표시 확인

### 1.2 메뉴판 업로드
- [ ] "파일 선택" 또는 드래그앤드롭 가능 확인
- [ ] 메뉴판 이미지 선택
- [ ] 이미지 미리보기 표시 확인 (선택 사항)

### 1.3 언어 및 화폐 선택
- [ ] 언어 선택: "Korean" 선택
- [ ] 화폐 선택: "South Korean won" 또는 "KRW Won" 선택
- [ ] 선택 값이 UI에 반영되는지 확인

### 1.4 스캔 실행
- [ ] "메뉴 스캔하기" 버튼 활성화 확인
- [ ] 버튼 클릭
- [ ] 로딩 스피너 표시 확인 ("처리 중..." 등)
- [ ] 처리 시간 측정 시작

### 1.5 결과 페이지 (Control UI)
- [ ] `/menu/{scanId}` URL로 리다이렉트 확인
- [ ] 처리 시간 표시 확인 (예: "5.2초")
- [ ] "메뉴 분석 완료" 제목 확인
- [ ] "{N}개의 메뉴를 찾았습니다" 메시지 확인

#### Control UI 검증 (핵심!)
- [ ] **메뉴 아이템이 목록으로 표시됨**
- [ ] **각 메뉴 아이템에 다음 정보 포함**:
  - [ ] 원본 메뉴명 (예: "ラーメン")
  - [ ] 번역된 메뉴명 (예: "라면")
  - [ ] 원본 가격 (예: "¥800")
  - [ ] 환율 변환된 가격 (예: "₩8,000")
- [ ] **음식 사진이 없음 확인** ❌ (Control 그룹 특징)
- [ ] **음식 설명이 없음 확인** ❌ (Control 그룹 특징)

### 1.6 설문 제출
- [ ] 5초 대기 (타이머로 측정)
- [ ] 설문 모달 자동 표시 확인
- [ ] 모달 제목: "이 정보만으로 확신을 갖고 주문할 수 있습니까?" 확인
- [ ] "Yes (확신 있음)" 버튼 표시 확인
- [ ] "No (여전히 불안함)" 버튼 표시 확인
- [ ] "No" 버튼 클릭 (Control 그룹은 텍스트만 제공)
- [ ] 모달 닫힘 확인
- [ ] 에러 없이 제출 완료 확인

### 1.7 테스트 결과 기록
**처리 시간**: _________ 초 (목표: ≤ 5초)
**메뉴 개수**: _________ 개
**OCR 정확도**: ☐ 높음 ☐ 중간 ☐ 낮음 (육안 판단)
**환율 변환**: ☐ 정확 ☐ 부정확
**설문 제출**: ☐ 성공 ☐ 실패
**전체 평가**: ☐ 성공 ☐ 부분 성공 ☐ 실패

**문제점 및 개선 사항**:
```
(여기에 기록)
```

---

## Test 2: Treatment Group Flow (시각적 메뉴)

### 2.1-2.4 (Test 1과 동일)
- [ ] 홈페이지 접속
- [ ] 메뉴판 업로드 (다른 이미지 사용)
- [ ] 언어 및 화폐 선택
- [ ] 스캔 실행

### 2.5 결과 페이지 (Treatment UI)
- [ ] `/menu/{scanId}` URL로 리다이렉트 확인
- [ ] 처리 시간 표시 확인
- [ ] "메뉴 분석 완료" 제목 확인

#### Treatment UI 검증 (핵심!)
- [ ] **메뉴 아이템이 카드 형식으로 표시됨** (Grid 레이아웃)
- [ ] **각 메뉴 아이템에 다음 정보 포함**:
  - [ ] 원본 메뉴명 (예: "Sushi")
  - [ ] 번역된 메뉴명 (예: "초밥")
  - [ ] **음식 사진 표시 ✅** (Treatment 그룹 특징)
  - [ ] **음식 설명 표시 ✅** (예: "신선한 생선과 밥으로 만든 일본 요리")
  - [ ] 원본 가격 (예: "$12.99")
  - [ ] 환율 변환된 가격 (예: "₩17,000")

### 2.6 설문 제출
- [ ] 5초 대기
- [ ] 설문 모달 자동 표시 확인
- [ ] "Yes (확신 있음)" 버튼 클릭 (Treatment 그룹은 풍부한 정보 제공)
- [ ] 모달 닫힘 확인
- [ ] 설문 제출 성공 확인

### 2.7 테스트 결과 기록
**처리 시간**: _________ 초 (목표: ≤ 5초)
**메뉴 개수**: _________ 개
**OCR 정확도**: ☐ 높음 ☐ 중간 ☐ 낮음
**음식 사진 매칭**: ☐ 관련성 높음 ☐ 중간 ☐ 낮음
**음식 설명 품질**: ☐ 유용함 ☐ 보통 ☐ 부족함
**환율 변환**: ☐ 정확 ☐ 부정확
**설문 제출**: ☐ 성공 ☐ 실패
**전체 평가**: ☐ 성공 ☐ 부분 성공 ☐ 실패

**문제점 및 개선 사항**:
```
(여기에 기록)
```

---

## Test 3: A/B Group Randomization

### 3.1 반복 테스트
- [ ] "다시 스캔하기" 버튼으로 홈 복귀
- [ ] 동일 메뉴판 이미지로 스캔 (총 5회)
- [ ] 각 결과에서 A/B 그룹 기록:
  1. ☐ Control ☐ Treatment
  2. ☐ Control ☐ Treatment
  3. ☐ Control ☐ Treatment
  4. ☐ Control ☐ Treatment
  5. ☐ Control ☐ Treatment

### 3.2 검증
- [ ] Control과 Treatment가 모두 나타남 확인
- [ ] 대략 50:50 비율 확인 (완벽하지 않아도 됨)

**결과**: Control __회 / Treatment __회
**평가**: ☐ 정상 ☐ 비정상 (한쪽만 나타남)

---

## Test 4: Survey Data Persistence

### 4.1 H2 Console 접속
- [ ] 브라우저에서 http://localhost:8080/h2-console 열기
- [ ] JDBC URL: `jdbc:h2:mem:testdb` 확인
- [ ] User Name: `sa` 입력
- [ ] Password: (비어 있음)
- [ ] "Connect" 버튼 클릭

### 4.2 데이터 확인
- [ ] SQL 실행:
  ```sql
  SELECT * FROM survey_response ORDER BY submitted_at DESC LIMIT 10;
  ```
- [ ] 방금 제출한 설문 데이터 확인:
  - [ ] `id` (자동 생성)
  - [ ] `scan_id` (UUID 형식)
  - [ ] `has_confidence` (true/false)
  - [ ] `submitted_at` (타임스탬프)

### 4.3 데이터 정합성 확인
- [ ] Test 1 설문 (Control, No) 확인
- [ ] Test 2 설문 (Treatment, Yes) 확인
- [ ] `scan_id`가 각 메뉴 스캔과 일치하는지 확인

**결과**: ☐ 성공 ☐ 실패
**데이터 개수**: ________ 개

---

## Test 5: Error Handling

### 5.1 잘못된 파일 형식
- [ ] TXT 파일 또는 PDF 파일 업로드 시도
- [ ] 적절한 에러 메시지 표시 확인
- [ ] "지원되는 형식: JPG, PNG, HEIC" 등 안내 확인
- [ ] 앱이 크래시되지 않음 확인

**결과**: ☐ 정상 처리 ☐ 비정상

### 5.2 빈 이미지
- [ ] 텍스트가 없는 순수 이미지 업로드 (예: 단색 이미지)
- [ ] OCR 실패 시 적절한 메시지 표시 확인
- [ ] "메뉴 텍스트를 찾을 수 없습니다" 등 안내 확인

**결과**: ☐ 정상 처리 ☐ 비정상

### 5.3 네트워크 오류 (선택 사항)
- [ ] Backend 서버 중지
- [ ] Frontend에서 스캔 시도
- [ ] "서버에 연결할 수 없습니다" 메시지 표시 확인
- [ ] Retry 옵션 또는 홈 복귀 버튼 확인

**결과**: ☐ 정상 처리 ☐ 비정상

---

## Test 6: Performance

### 6.1 처리 시간 측정
다양한 메뉴판 이미지로 5회 테스트:

| 이미지 | 메뉴 개수 | 처리 시간 (초) | 평가 |
|--------|----------|---------------|------|
| 1      | ___      | ___           | ☐ ≤5초 ☐ >5초 |
| 2      | ___      | ___           | ☐ ≤5초 ☐ >5초 |
| 3      | ___      | ___           | ☐ ≤5초 ☐ >5초 |
| 4      | ___      | ___           | ☐ ≤5초 ☐ >5초 |
| 5      | ___      | ___           | ☐ ≤5초 ☐ >5초 |

**평균 처리 시간**: _________ 초
**목표 달성**: ☐ 성공 (평균 ≤5초) ☐ 실패

---

## 최종 평가

### Phase 3-4 성공 기준

- [ ] Control Group Flow 정상 작동
- [ ] Treatment Group Flow 정상 작동
- [ ] A/B 그룹 배정 랜덤 확인
- [ ] 설문 제출 및 저장 확인
- [ ] 에러 핸들링 정상 작동
- [ ] 처리 시간 ≤ 5초 (평균)

### 가설 검증 준비 상태

- [ ] **H1 검증 가능**: Control vs Treatment UI 차별화 명확
- [ ] **H2 검증 가능**: 기술 정확도 측정 가능 (OCR, 환율, 매칭)
- [ ] **H3 검증 가능**: 설문 데이터 수집 및 저장 정상

### 전체 평가

**Phase 3-4 완료 여부**: ☐ 완료 ☐ 부분 완료 ☐ 미완료

**주요 성과**:
```
(여기에 기록)
```

**문제점 및 개선 필요 사항**:
```
(여기에 기록)
```

**다음 단계 제안**:
```
(여기에 기록)
```

---

## 다음 세션 준비

### Phase 3-4 PR 생성
- [ ] 이 체크리스트 작성 완료
- [ ] 테스트 결과 문서화
- [ ] PR 생성: `feature/phase3-4-integration-test → develop`
- [ ] PR 설명에 테스트 결과 포함

### Phase 3-5 준비
- [ ] Phase 3-5 브랜치 생성 계획
- [ ] 배포 준비 작업 목록 검토
- [ ] Docker 설정 준비

---

**테스트 수행자**: _________________
**테스트 일시**: _________________
**소요 시간**: _________ 분
